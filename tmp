#!/bin/bash

# Fichier contenant les exports
VAR_FILE="variable.sh"

# R√©pertoire contenant tes scripts
SCRIPTS_DIR="./scripts"

echo "üîé V√©rification des variables d√©finies dans $VAR_FILE..."

# R√©cup√©ration des variables export√©es
VARS=$(grep -oP '^[[:space:]]*export[[:space:]]+\K[[:alnum:]_]+(?==)' "$VAR_FILE")

# V√©rification de l‚Äôutilisation
for var in $VARS; do
    if grep -R --exclude="$VAR_FILE" "\b$var\b" "$SCRIPTS_DIR" >/dev/null 2>&1; then
        echo "‚úîÔ∏è $var est utilis√©"
    else
        echo "‚ö†Ô∏è $var n'est pas utilis√©"
    fi
done





for var in $VARS; do
    if grep -R --exclude="$VAR_FILE" -E "\${$var}|\$$var" "$SCRIPTS_DIR" >/dev/null 2>&1; then
        echo "‚úîÔ∏è $var est utilis√©"
    else
        echo "‚ö†Ô∏è $var n'est pas utilis√©"
    fi
done



for var in $VARS; do
    echo "üëâ Je cherche $var"
    if grep -R --exclude="$VAR_FILE" -E "\\\$$var|\\\${$var}" "$SCRIPTS_DIR" >/dev/null 2>&1; then
        echo "‚úîÔ∏è $var est utilis√©"
    else
        echo "‚ö†Ô∏è $var n'est pas utilis√©"
    fi
done






echo "DEBUG : grep -R -E \"\\\$$var|\\\${$var}\" $SCRIPTS_DIR"
