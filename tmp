#!/bin/bash

# Fichier contenant les exports
VAR_FILE="variable.sh"

# Répertoire contenant tes scripts
SCRIPTS_DIR="./scripts"

echo "🔎 Vérification des variables définies dans $VAR_FILE..."

# Récupération des variables exportées
VARS=$(grep -oP '^[[:space:]]*export[[:space:]]+\K[[:alnum:]_]+(?==)' "$VAR_FILE")

# Vérification de l’utilisation
for var in $VARS; do
    if grep -R --exclude="$VAR_FILE" "\b$var\b" "$SCRIPTS_DIR" >/dev/null 2>&1; then
        echo "✔️ $var est utilisé"
    else
        echo "⚠️ $var n'est pas utilisé"
    fi
done
